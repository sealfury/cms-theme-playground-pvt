{# Header nav menu card #}

{% macro headerCard(title, size, href,
sub="",
features=[],
image=null) %}

  {% if sub == "" %}
    {% set subtitle = "Sed posuere consectetur est at lobortis. " %}
    {% set subtitle = subtitle ~ "Cras mattis consectetur purus sit amet fermentum. " %}
    {% set subtitle = subtitle ~ "Etiam porta sem." %}
  {% else %}
    {% set subtitle = sub %}
  {% endif %}

  {% if not features.length %}
    {% set features_group = [
      "Flexible, efficient & dynamic",
      "The right information at the right time",
      "Report within 30 seconds"
    ] %}
  {% else %}
    {% set features_group = features %}
  {% endif %}

  {% set title_string = title|string|lower|split(" ", 3) %}
  {% set title_class = title_string.pop(0) %}

  <a class="header-card header-card__{{ size }}" href="{{ href }}">
    <ul class="header-card__content--{{ size }}">
      <li class="header-card__title header-card__title--{{ title_class }}">
        {% if image is mapping %}
          <img width="{{ image.width }}" src="{{ image.src }}" />
        {% endif %}
        <span>{{ title }}</span>
      </li>
      <li class="header-card__subtitle--{{ size }}">
        <span>{{ subtitle }}</span>
      </li>
      {% if (features_group|length > 0) and (size == "large") %}
        {% for feature in features_group %}
        <li class="header-card__feature">
          {{ feature }}
        </li>
        {% endfor %}
      {% endif %}
    </ul>
  </a>

{% endmacro %}

{# Breadcrumb Menu & Translation Overrides #}

{% macro createBreadcrumbMenu(
isBreadcrumb=true,
menuClass="") %}
  {% set breadCrumbs = request.path|split("/") %}
  {% if content.language.details.tag != "en" %}
    {% do breadCrumbs.pop(0) %}
  {% endif %}

  <ol class="{{ menuClass }}__breadcrumb-menu breadcrumb-menu">
    {% for crumb in breadCrumbs %}
    {% set pageNameArr = crumb|split("-") %}
    {% set pageName = pageNameArr|map("capitalize")|join(" ") %}

    <li class="breadcrumb__menu-item {{ "active-page" if loop.last }}">
      {% unless loop.last %}
        <a href="/{{ crumb }}">{{ pageName }}</a>
      {% else %}
        <span>{{ pageName }}</span>
      {% endunless %}
    </li>
    {% endfor %}
  </ol>

{% endmacro %}

{% set pageName = request.path|split("/")|last|split("-")|map("capitalize")|join(" ") %}
